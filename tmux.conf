# 256 colors, use screen-based terminal with terminal multiplexers such as tmux
set -g default-terminal 'screen-256color'

# Change prefix to C-a
unbind C-b
set -g prefix C-a

# Scrollback, 10k lines
set -g history-limit 10000

# Detach
bind-key -n C-j detach

# Reload config without killing server
bind R source-file ~/.tmux.conf

# Splitting keybindings
unbind %
bind V split-window -v
unbind '"'
bind v split-window -h

# Confirm before killing window/server
bind-key k confirm kill-window
bind-key K confirm kill-server

# Toogle statusbar
bind-key b set-option status

# Ctrl+left/right cycles through windows
bind-key -n C-right next
bind-key -n C-left prev

# Open a man page in a new window
bind m command-prompt "split-window 'exec man %%'"

# Disable visual and audible bell
set -g bell-action none
set -g visual-bell off

# Start window indexing at 1 instead of 0
set -g base-index 1

# Enable wm window-titles
set -g set-titles on
set -g set-titles-string ' #I-#W '

# Border colours
set -g pane-active-border-bg default
set -g pane-active-border-fg cyan

# Wm window title string (uses statusbar vars)
set -g set-titles-string "tmux:#I [ #W ]"

# Statusbar
set -g status-interval 1
set -g status-justify centre # center align window list
set -g status-left-length 20
set -g status-left '#[fg=blue]#(whoami)#[fg=black] • #[fg=cyan]#H #[fg=black]'
set -g status-right '#[fg=cyan]%H:%M • #[fg=blue]%d.%m.%y#[default]'

# Default statusbar colors
set -g status-fg white
set -g status-bg default
set -g status-attr bright

# Default window title colors
set-window-option -g window-status-fg white
set-window-option -g window-status-bg default
set-window-option -g window-status-attr bright

# Command/message line colors
set -g message-fg white
set -g message-bg black
set -g message-attr bright

# Turn off Esc-wait
set -sg escape-time 0

# Toggle window synchronization
bind-key y set-window-option synchronize-panes

# Window and pane selection
# ls = list-sessions, selectw = select-window
bind -n M-1 if 'test `tmux ls -F "#S"` != "weechat"' 'selectw -t 1' 'send M-1'
bind -n M-2 if 'test `tmux ls -F "#S"` != "weechat"' 'selectw -t 2' 'send M-2'
bind -n M-3 if 'test `tmux ls -F "#S"` != "weechat"' 'selectw -t 3' 'send M-3'
bind -n M-4 if 'test `tmux ls -F "#S"` != "weechat"' 'selectw -t 4' 'send M-4'
bind -n M-5 if 'test `tmux ls -F "#S"` != "weechat"' 'selectw -t 5' 'send M-5'
bind -n M-6 if 'test `tmux ls -F "#S"` != "weechat"' 'selectw -t 6' 'send M-6'
bind -n M-7 if 'test `tmux ls -F "#S"` != "weechat"' 'selectw -t 7' 'send M-7'
bind -n M-8 if 'test `tmux ls -F "#S"` != "weechat"' 'selectw -t 8' 'send M-8'
bind -n M-9 if 'test `tmux ls -F "#S"` != "weechat"' 'selectw -t 9' 'send M-9'
bind -n M-0 if 'test `tmux ls -F "#S"` != "weechat"' 'selectw -t 0' 'send M-0'
unbind-key j    ; bind-key j        select-pane -D
unbind-key k    ; bind-key k        select-pane -U
unbind-key h    ; bind-key h        select-pane -L
unbind-key l    ; bind-key l        select-pane -R
