""" Keybindings {{{
    " Unbind help
    nnoremap <F1> <Nop>

    " Disable Ctrl+q
    map <C-q> <Nop>

    " Go back in history with backspace
    nmap <BS> :back<CR>

    " Disable highlighted search matches
    map <C-7> :noh<CR>

    " Scroll up/down lines from 'scroll' option, default half a screen
    map d <C-d>
    map s <C-u>

    " Pin tabs easily
    nmap gp :set<Space>apptab<Return>
    nmap gu :set<Space>noapptab<Return>

    " Traditional copy/paste, no matter the mode
    noremap <C-c> <C-v><C-c>
    noremap <C-v> <C-v><C-v>

    " Rebind Ctrl+Shift+c as copy instead of firefox inspector
    " Same bind is used in most terminals, resulting in frequent misclicks
    map <C-S-c> <C-v><C-c>

    " Go to last used tab
    nnoremap gf <C-^>
""" }}}
""" Firefox settings {{{
    " General preferences, i.e. about:config entries
    set! accessibility.blockautorefresh="true"
    set! browser.display.show_image_placeholders="false"
    set! browser.download.useDownloadDir="false"
    set! browser.newtabpage.enabled="true"
    set! browser.newtabpage.enhanced="false"
    set! browser.preferences.inContent="true"
    set! browser.sessionstore.restore_on_demand="false"
    set! browser.showQuitWarning="true"
    set! browser.startup.page="3"
    set! browser.tabs.insertRelatedAfterCurrent="false"
    set! dom.event.clipboardevents.enabled="false"
    set! general.autoScroll="true"
    set! general.smoothScroll="false"
    set! general.warnOnAboutConfig="false"
    set! geo.enabled="false"
    set! layout.spellcheckDefault="0"
    set! network.http.pipelining="true"
    set! network.http.proxy.pipelining="true"
    set! network.http.pipelining.ssl="true"
    set! privacy.donottrackheader.enabled="false"

    " Attempt to reduce browser fingerprint uniqueness. To test use Panopticlick:
    " - https://panopticlick.eff.org
    " Inspired by the addon Blender:
    " - https://addons.mozilla.org/en-US/firefox/addon/blender-1/
    " TODO: buildID changed to integer if not previously set, should be string
    "       works in ff using :set!, but not in rc file with set!
    set! general.appname.override="Netscape"
    set! general.appversion.override="5.0 (Windows)"
    set! general.buildID.override="20141113143407"
    set! general.oscpu.override="Windows NT 6.1; WOW64"
    set! general.platform.override="Win32"
    set! general.useragent.override="Mozilla/5.0 (Windows NT 6.1; WOW64; rv:33.0) Gecko/20100101 Firefox/33.0"
    set! intl.accept_languages="en-US, en"

    " Does not work for everything, for example html5 videos using play()
    " - https://bugzilla.mozilla.org/show_bug.cgi?id=659285
    set! media.autoplay.enabled="false"

    " Firefox CSS, instead of stylish/userChrome.css/user.css
    style -name firefox_tabs chrome://* .tab-close-button { display: none !important; } .tab-text { font-size: 0.95em !important; } .tabbrowser-tabs[treestyletab-mode="vertical"] .tab-stack { min-height: 20px !important; } .tabs-newtab-button { display: none !important; }

    """ Extensions {{{
        set! extensions.vimperator.firsttime="false"

        " TreeStyleTabs - http://piro.sakura.ne.jp/xul/xpi/nightly/treestyletab.xpi
        set! extensions.treestyletab.autoCollapseExpandSubtreeOnAttach="false"
        set! extensions.treestyletab.autoCollapseExpandSubtreeOnSelect="false"
        set! extensions.treestyletab.tabbar.fixed.vertical="true"

        " NoScript
        set! noscript.allowedMimeRegExp="FONT@https?://netdna\\.bootstrapcdn\\.com"
        set! noscript.autoReload.allTabs="false"
        set! noscript.collapseObject="true"
        set! noscript.notify="false"
        set! noscript.doNotTrack.enabled="false"
        set! noscript.showAbout="false"
        set! noscript.showAllowPage="false"
        set! noscript.showBlockedObjects="false"
        set! noscript.showDistrust="false"
        set! noscript.showGlobal="false"
        set! noscript.showRecentlyBlocked="false"
        set! noscript.showRevokeTemp="false"
        set! noscript.showTemp="false"
        set! noscript.showTempAllowPage="false"
        set! noscript.showTempToPerm="false"
        set! noscript.showUntrusted="false"
        set! noscript.smartClickToPlay="false"
        set! noscript.stickyUI.liveReload="true"
    """ }}}
""" }}}
""" Vimperator
    " General settings
    set defsearch="google"
    set hintchars="qwertyasdfg"
    set status=input,location,bookmark,history,tabcount,ssl
    set toolbars="nonavigation"

    " Commands
    command! backgroundimage :js let (doc = content.document) let (m = doc.defaultView.getComputedStyle(doc.body, '').backgroundImage.match(/url\s*\(\s*['"](.+)['"]\s*\)/)) m ? liberator.open(m[1], liberator.NEW_TAB) : liberator.echoerr('background image not found')
""" }}}
""" Colorscheme based off darkness.vimp {{{
    highlight Bell border: 0 none; background-color: #191919;
    highlight CmdLine background: #191919; color: #afafaf; font-size: 9pt;
    highlight CompDesc color: #c6c6c6; width: 50%; font-size: 9pt;
    highlight CompItem[selected] background: #666666; color: #afafaf;
    highlight CompResult width: 45%; overflow: hidden;font-size: 9pt; font-family: monospace; font-weight: normal;
    highlight CompTitle color: #afafaf; background: #191919; font-weight: bold;
    highlight CompTitle>* padding: 0 .5ex;
    highlight ErrorMsg color: #ffffff; background: red; font-weight: bold;
    highlight Filter font-weight: bold;color: #afafaf;
    highlight FrameIndicator background-color: #191919; opacity: 0.5; z-index: 999; position: fixed; top: 0; bottom: 0; left: 0; right: 0;
    highlight Function color: lightgreen; background: #191919;
    highlight Hint font-family: monospace; font-size: 14px; font-weight: bold; text-transform: uppercase; color: white; background-color: red; border-color: ButtonShadow; border-width: 0px; border-style: solid; padding: 0px 1px 0px 1px; 
    highlight HintActive background: blue; color: #f6e9e9;
    highlight HintElem background-color: #191919; color: #f6e9e9;
    highlight InfoMsg color: #afafaf; background: #191919;
    highlight LineNr color: #afafaf; background: #191919;
    highlight ModeMsg color: #afafaf; background: #191919; "CmdLine when Not in Use
    highlight MoreMsg color: #afafaf; background: #191919;
    highlight NonText color: lightblue; min-height: 16px; padding-left: 2px;
    highlight Normal color: #afafaf; background: #191919;
    highlight Number color: tan; background: #191919
    highlight Question color: #ffffff; background: #191919; font-weight: bold;
    highlight StatusLine color: #F1F1E0; background: #191919; "font-size: 9pt;
    highlight String color: #191919; background: #afafaf;
    highlight Tag color: #191919; background: #afafaf;
    highlight Title color: #191919; background: #afafaf; font-weight: bold;
    highlight URL text-decoration: none; color: lightblue; background: inherit;
    highlight WarningMsg color: red; background: #191919;
""" }}}

source! $HOME/.vimperatorrc.local

" vim: ft=vim
